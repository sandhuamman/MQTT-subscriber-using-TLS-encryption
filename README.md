This Python code sets up an MQTT subscriber that connects to a broker (test.mosquitto.org) using TLS encryption and subscribes to a topic where simulated temperature data is published. The subscriber receives the data in the form of a JSON-like message, extracts the temperature value, and stores it in a deque to maintain a rolling window of the last 50 temperature readings. The matplotlib library is used to create a live plot that updates every time a new temperature value is received, showing the temperature over time. The plot is dynamically updated using plt.ion() for interactive mode, and the x-axis represents time while the y-axis represents the temperature. The subscriber runs continuously, updating the graph with each new message, providing real-time visualization of the sensor data.
